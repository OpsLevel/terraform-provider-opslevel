---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "opslevel_integration_aws Resource - terraform-provider-opslevel"
subcategory: ""
description: |-
  Manages a AWS Integration
---

# opslevel_integration_aws (Resource)

Manages a AWS Integration

## Example Usage

```terraform
resource "random_string" "external_id" {
  length           = 16
  special          = false
}

resource "aws_iam_policy" "opslevel" {
  name = "opslevel-demo"

  policy = jsonencode({
    Version = "2012-10-17"
    Statement = [
      {
        Action   = [
          "autoscaling:Describe*",
          "cloudfront:GetDistribution",
          "cloudfront:ListDistributions",
          "dynamodb:Describe*",
          "dynamodb:List*",
          "ec2:Describe*",
          "ec2:Get*",
          "ecs:Describe*",
          "ecs:List*",
          "elasticloadbalancing:Describe*",
          "elasticache:Describe*",
          "elasticache:List*",
          "es:Describe*",
          "es:List*",
          "es:Get*",
          "grafana:Describe*",
          "grafana:List*",
          "kafka:Describe*",
          "kafka:List*",
          "kinesis:Get*",
          "kinesis:List*",
          "kinesis:Describe*",
          "lambda:Get*",
          "lambda:List*",
          "rds:Describe*",
          "rds:List*",
          "redshift:Describe*",
          "redshift:List*",
          "route53domains:Get*",
          "route53domains:List*",
          "s3:Describe*",
          "s3:List*",
          "s3:GetBucketLocation",
          "s3:GetBucketTagging",
          "sns:Get*",
          "sns:List*",
          "storagegateway:List*",
          "storagegateway:Describe*",
          "sqs:Get*",
          "sqs:List*",
          "tag:Get*",
          "waf:Get*",
          "waf:List*",
          "wafv2:Get*",
          "wafv2:List*",
          "wafv2:Describe*"
        ]
        Effect   = "Allow"
        Resource = "*"
      },
    ]
  })
}

resource "aws_iam_role" "opslevel" {
  name                = "opslevel-demo"
  managed_policy_arns = [aws_iam_policy.opslevel.arn]
  assume_role_policy = jsonencode({
    Version = "2012-10-17"
    Statement = [
      {
        Action = "sts:AssumeRole"
        Effect = "Allow"
        Sid    = ""
        Principal = {
          Service = "ec2.amazonaws.com",
          AWS = "arn:aws:iam::746108190720:user/opslevel-integration",
        }
        Condition = {
          StringEquals = {
            "sts:ExternalId" = random_string.external_id.result
          }
        }
      },
    ]
  })
}

resource "opslevel_integration_aws" "dev" {
  name = "dev"
  iam_role = aws_iam_role.opslevel.arn
  external_id = random_string.external_id.result
  ownership_tag_overrides = true
  ownership_tag_keys = ["owner", "team", "group"]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `external_id` (String) The External ID defined in the trust relationship to ensure OpsLevel is the only third party assuming this role (See https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-user_externalid.html for more details).
- `iam_role` (String) The IAM role OpsLevel uses in order to access the AWS account.
- `name` (String) The name of the integration.

### Optional

- `last_updated` (String)
- `ownership_tag_keys` (List of String) An Array of tag keys used to associate ownership from an integration. Max 5
- `ownership_tag_overrides` (Boolean) Allow tags imported from AWS to override ownership set in OpsLevel directly.

### Read-Only

- `id` (String) The ID of this resource.

## Import

Import is supported using the following syntax:

```shell
terraform import opslevel_integration_aws.example Z2lkOi8vb3BzbGV2ZWwvU2VydmljZS82MDI0
```
